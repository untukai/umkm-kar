steps:
  - name: Checkout repository
    uses: actions/checkout@v4

  - name: Set up JDK 17
    uses: actions/setup-java@v4
    with:
      java-version: '17'
      distribution: 'temurin'
      cache: gradle

  - name: Setup Gradle
    uses: gradle/actions/setup-gradle@v3

  - name: Grant execute permission for gradlew
    run: chmod +x gradlew

  - name: Build with Gradle
    run: ./gradlew assembleDebug --stacktrace --info

  - name: List APK outputs
    run: ls -R

  - name: Upload APK as artifact
    uses: actions/upload-artifact@v4
    with:
      name: KODIK-Android-APK
      path: |
        **/build/outputs/apk/**/*.apk
